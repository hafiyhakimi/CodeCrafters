<!doctype html>
<html lang="en">

<head>
  <style>
    .content {
      max-width: 500px;
      margin: auto;
    }

    table {
      border: 4px solid black;
      margin: 0 auto;
      padding: 40px;
      width: fit-content;
      
    }

    .panel {
    margin-bottom: 30px;
    color: #696969;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.08);
}
  </style>
</head>

<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
  integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

<!-- <h1 class="p-3 mb-2 bg-success text-white text-center">iGROW Knowledge Management System</h1> -->

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js"
  integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>



<div class="pos-f-t">
  <div class="collapse" id="navbarToggleExternalContent">
    <div class="p-4" style="background-color: #8FBC8F;">
      <h4 class="text-white">What are you looking for?</h4>
      <span class="text-muted">Search here...</span>
      <form class="form-inline my-2">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-primary" type="submit">Search</button>
      </form>
    </div>
    
  </div>
  <nav class="navbar navbar-dark bg-success">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </nav>
</div>

<nav class="navbar navbar-expand navbar-dark bg-success">
  <a class="navbar-brand" href="#">P  L  A  N  T  F  E  E  D</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  
  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link " href="{% url 'Home' %}">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'sharing:MainSharing' %}">Sharing</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href=" {% url 'group:MainGroup' %}">Group</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'MemberMainPage' %}">Member</a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="{% url 'workshop:MainWorkshop' %}">Workshop</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Marketplace
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="{% url 'marketplace:MainMarketplace' %}">Browse Marketplace<span class="sr-only">(current)</span></a>
          <a class="dropdown-item" href="{% url 'marketplace:MyMarketplace' %}">My Marketplace</a>
        </div>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Profile
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" href="{% url 'ViewProfile' %}">View Profile<span class="sr-only">(current)</span></a>
          <a class="dropdown-item" href="{% url 'EditProfile' %}">Edit Profile</a>
        </div>
      </li>

    </ul>
    <a class="btn bg-light" href="{% url 'Logout' %}">
      <img class="bi bi-arrow-bar-right">LOGOUT</img>
    </a>
  </div>
</nav>
<br />

  <div class="container my-3 bg-light" style="text-align: center;">
    <label for="exampleFormControlTextarea1" style="font-size: 2em;">Workshop</label>
  </div>
  <br />
  {% csrf_token %}
  {% block body %}

  {% if person.UserLevel == 'Admin' %}
  <div class="container">
    <!-- <a href="{% url 'workshop:CreateWorkshop' %}" class="link-primary">Create</a> ||
    <a href="{% url 'workshop:MyWorkshop' %}" class="link-primary">View Your Workshop</a> -->
    <a class="btn btn-primary" href="{% url 'workshop:CreateWorkshop' %}" role="button">Create Workshop</a>
    <a class="btn btn-primary" href="{% url 'workshop:MyWorkshop' %}" role="button">View Your Workshop</a>
  </div>
  {% endif %}

  <br />
  <div class="container">
    <h9>Filter based on tags: {{chosen_PlantTag.PlantTagName}}</h9>
  </div>
  <br />

  <div class="container">
    <form method="POST" class="center">
      {% csrf_token %}

      <br />
      <div class="row">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Programme Name</th>
              <th scope="col">Speaker</th>
              <th scope="col">Description</th>
              <th scope="col">Date</th>
              <th scope="col">Start Time</th>
              <th scope="col">End Time</th>
              <th scope="col">Plant Tagging Detail</th>
              <th colspan="2" style="text-align: center;" scope="col">Action</th>
              {% if person.UserLevel == 'User' %}
              <th scope="col"> &nbsp; </th>
              {% endif %}
            </tr>
          </thead>
          <tbody>
            {% csrf_token %}
            {% for data in filteredWorkshop %}
            <tr class="table">
              <th scope="row" value="{{ data.WorkshopPlantTag.ProgrammeName }}">{{ data.WorkshopPlantTag.ProgrammeName}}</th>
              <th scope="row" value="{{ data.WorkshopPlantTag.Speaker }}">{{ data.WorkshopPlantTag.Speaker }}</th>
              <th scope="row" value="{{ data.WorkshopPlantTag.Description }}">{{ data.WorkshopPlantTag.Description }}
              </th>
              <th scope="row" value="{{ data.WorkshopPlantTag.Date }}">{{ data.WorkshopPlantTag.Date }}</th>
              <th scope="row" value="{{ data.WorkshopPlantTag.StartTime }}">{{ data.WorkshopPlantTag.StartTime }}</th>
              <th scope="row" value="{{ data.WorkshopPlantTag.EndTime }}">{{ data.WorkshopPlantTag.EndTime }}</th>
              <th>
                {%for ori_workshop in ori_workshop %}

                {% if data.WorkshopPlantTag == ori_workshop %}


                {% if ori_workshop.soilTagging.all %}

                <i>
                  {% for soilTags in ori_workshop.soilTagging.all %}
                  {{soilTags.soilTag.SoilTagName}} {% if not forloop.last %},{% endif %}
                  {% endfor %}
                </i>
                {% endif %}

                {% if ori_workshop.plantTagging.all %}

                <i>
                  {% for plantTags in ori_workshop.plantTagging.all %}
                  {{plantTags.plantTag.PlantTagName}} {% if not forloop.last %},{% endif %}
                  {% endfor %}
                </i>
                {% endif %}

                {% endif %}

                {% endfor %}
              </th>
              {% if person.Email == data.WorkshopPlantTag.PIC.Email %}
              <!-- <th><a href="{% url 'workshop:UpdateWorkshop' data.WorkshopPlantTag.id %}" class="card-link">Edit</a></th>
              <th><a href="{% url 'workshop:DeleteWorkshop' data.WorkshopPlantTag.id %}" class="card-link">Delete</a></th> -->
              <th><a class="btn btn-secondary" href="{% url 'workshop:UpdateWorkshop' data.WorkshopPlantTag.id %}" role="button">Edit</a></th>
              <th><a class="btn btn-danger" href="{% url 'workshop:DeleteWorkshop' data.WorkshopPlantTag.id %}" role="button">Delete</a></th>
              {% else %}
              <th scope="row"> &nbsp; </th>
              <th scope="row"> &nbsp; </th>
              {% endif %}
              {% for booking in booking %}
            {% if  data.id == booking.BookWorkshop.id and booking.Participant.Email == request.session.Email %}
              <th><a href="{% url 'workshop:MainWorkshop' %}" class="btn btn-primary" role="button" onclick="return DuplicationWarning()">Booked</a></th>
            {% elif forloop.last %}
            <th><a href="{% url 'workshop:Booking' data.id %}" class="btn btn-primary" role="button" onclick="return ConfirmBooking()">Book</a></th>
              {% endif %}
            {%endfor%}

            {% if not booking %}
            <th><a href="{% url 'workshop:Booking' data.id %}" class="btn btn-primary" role="button" onclick="return ConfirmBooking()">Book</a></th>
            {% endif %}
            </tr>
            {% endfor %}
          </tbody>
        </table>

      </div>

    </form>
  </div>

  {% if not filteredWorkshop %}
  <hr>
  <div class="container">
    <h7 style="text-align: center;"><i>No workshop related to this {{ chosen_PlantTag.PlantTagName }} tag </i></h7>
  </div>
  <hr>
  {% endif %}


  {% endblock body %}
</body>

</html>